<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.hotel.point.PointMapper">

	
	<select id="count" parameterType="kr.co.hotel.point.PointVO" resultType="java.lang.Integer">
	<!-- 테이블 명이 변수로 들어갈수 있음 --><!-- comment테이블은 하나, 여기에 각 페이지의 table_name 구분, 페이지의 게시판 마다 boar_no구분 -->
		SELECT count(*) from point
		WHERE guest_no = #{guest_no} 
		AND date BETWEEN #{searchStartDate} AND #{searchEndDate}
		
		
	</select>
	
	
	<select id="list" parameterType="kr.co.hotel.point.PointVO" resultType="kr.co.hotel.point.PointVO">

		SELECT 
		p.date, h.hotel_name , p.io_point, p.totalpoint from point p, reserv r, hotel h
		WHERE p.guest_no = r.guest_no
		AND r.hotel_no = h.hotel_no
		
		AND p.date BETWEEN #{searchStartDate} AND #{searchEndDate}
		AND guest_no = #{guest_no}
	
		ORDER BY p.date DESC
		limit ${startIdx}, ${pageRow}
	
	</select>
	
	<select id="total" parameterType="int" resultType="Integer">
		
		select totalpoint from point
		where guest_no = #{guest_no}
		order by point_no desc
		limit 1
	
	</select>
	

	
	<delete id="delete" parameterType="int">
		
	</delete>
	
	
	
	

	
	

</mapper>