<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.hotel.HRRegister.HRRegisterMapper">  

	<insert id="insert" parameterType="kr.co.hotel.HRRegister.RoomVO" >
		INSERT INTO room
			( host_no, hotel_no, number, room_name, room_content, room_price, status)
		VALUES
			(#{host_no},#{hotel_no},#{number},#{room_name},#{room_content},#{room_price},#{status});
	</insert>
	
	<insert id="img_insert" parameterType="kr.co.hotel.HRRegister.RoomVO" >
		INSERT INTO image
			( hotel_no, filename_org, filename_real, image_order, image_type)
		VALUES
			(#{hotel_no},#{filename_org},#{filename_real},#{image_order},#{image_type})
	</insert>
	
	
	<select id="count" parameterType="kr.co.hotel.HRRegister.RoomVO" resultType="java.lang.Integer">
	<!-- 테이블 명이 변수로 들어갈수 있음 -->
		select count(*) from room
		
		<where>
			<if test="stype != null and stype !='' ">
				<if test="stype != 'all' ">
					${stype} like '%${sword}%'
				</if>
				
				<if test="stype == 'all' ">
		   			 content like '%${sword}%' or title like '%${sword}%'
		    	</if>
			</if>
		</where>
	</select>
	
	
	<select id="list" parameterType="kr.co.hotel.HRRegister.RoomVO" resultType="kr.co.hotel.HRRegister.RoomVO">

			select * from room
				<where>
					<if test="stype != null and stype !='' ">
						<if test="stype != 'all' ">
							${stype} like '%${sword}%'
						</if>
						
						<if test="stype == 'all' ">
				   			 content like '%${sword}%' or title like '%${sword}%'
				    	</if>
					</if>
				</where>
			order by room_no desc
			limit ${startIdx}, ${pageRow}
	
	</select>
	
	<select id="view" parameterType="java.lang.Integer" resultType="kr.co.hotel.HRRegister.RoomVO">
		
		select * from room
		where room_no = #{xx}
		<!--#{xx}> #{아무 이름이나 써도 괜찮다} 정수 하나만 넘어오니까-->
	</select>
	
	
	
	
	<update id="update" parameterType="kr.co.hotel.HRRegister.RoomVO">
	
		UPDATE 	room
		SET
				 host_no  = #{host_no },
				 hotel_no  = #{hotel_no },
				 number  = #{number },
				 room_name  = #{room_name },
				 room_content  = #{room_content },
				 room_price  = #{room_price },
				 status  = #{status }
		WHERE  room_no  = #{room_no}
		
	</update>
	

	
	<delete id="delete" parameterType="int">
		delete from room where room_no = #{room_no}
	
	</delete>
	
	
	<select id="get_hotelInfo" parameterType="int" resultType="kr.co.hotel.HRRegister.RoomVO">
	<!-- 테이블 명이 변수로 들어갈수 있음 -->
		select * from hotel where host_no =#{host_no}
		
		
	</select>
	
	
  
	
	

	
	

</mapper>