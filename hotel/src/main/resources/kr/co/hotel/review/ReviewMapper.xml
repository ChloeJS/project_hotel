<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.hotel.review.ReviewMapper">  

	<select id="count" parameterType="kr.co.hotel.HRRegister.RoomVO" resultType="java.lang.Integer">
	<!-- 테이블 명이 변수로 들어갈수 있음 -->
		select count(*) from room
		
		<where>
			host_no = #{host_no}
			<if test="stype != null and stype !='' ">
				<if test="stype != 'all' ">
					${stype} like '%${sword}%'
				</if>
				
				<if test="stype == 'all' ">
		   			 content like '%${sword}%' or title like '%${sword}%'
		    	</if>
			</if>
		</where>
	</select>
	
	
	<select id="list" parameterType="kr.co.hotel.HRRegister.RoomVO" resultType="kr.co.hotel.HRRegister.RoomVO">

			select * from room
				<where>
					host_no = #{host_no}
					<if test="stype != null and stype !='' ">
						<if test="stype != 'all' ">
							${stype} like '%${sword}%'
						</if>
						
						<if test="stype == 'all' ">
				   			 content like '%${sword}%' or title like '%${sword}%'
				    	</if>
					</if>
				</where>
			order by room_no desc
			limit ${startIdx}, ${pageRow}
	
	</select>
<!-- 이상 대기 -->	

	<select id="get_reserve" parameterType="kr.co.hotel.review.ReviewVO" resultType="kr.co.hotel.reserve.ReserveVO">
		
		select *,
		(select hotel_name from hotel where hotel_no = reserv.hotel_no)as hotel_name,
		(select number from room where room_no=reserv.room_no)as number
		
		from reserv 
		where reserv_no = #{reserv_no}
		
	</select>
	 

</mapper>